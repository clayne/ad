.\"
.\"	ad -- ASCII dump
.\"	ad.1: manual page
.\"
.\"	Copyright (C) 1996-2015  Paul J. Lucas
.\"
.\"	This program is free software; you can redistribute it and/or modify
.\"	it under the terms of the GNU General Public License as published by
.\"	the Free Software Foundation; either version 2 of the Licence, or
.\"	(at your option) any later version.
.\" 
.\"	This program is distributed in the hope that it will be useful,
.\"	but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"	GNU General Public License for more details.
.\" 
.\"	You should have received a copy of the GNU General Public License
.\"	along with this program; if not, write to the Free Software
.\"	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
.\"
.TH \f3ad\f1 1 "June 18, 2015" "PJL TOOLS"
.SH NAME
ad \- ASCII dump
.SH SYNOPSIS
.B ad
.RI [ options ]
[\f3+\f2offset\f1]
.RI [ file ]
.br
.B ad
.RI [ options ]
.RI [ file ]
[[\f3+\f1]\f2offset\f1]
.SH DESCRIPTION
.B ad
dumps the bytes of a file in hexadecimal
and also prints their corresponding ASCII characters
(for those bytes for which
.BR isprint (3)
returns true)
to standard output.
For those bytes that are not printable,
prints `\f(CW.\f1' (dot) instead.
.PP
.B ad
is similar to both
.BR hextdump (1)
and
.BR od (1)
except that
.B ad
can also highlight matching strings or numbers
similar to
.BR grep (1).
.SH OPTIONS
An option argument
.I n
means
.IR "unsigned integer"
and
.I s
means
.IR string .
If
.I n
starts with either
.B 0x
or
.BR 0X,
then
.I n
is interpreted as hexedecimal.
.TP 8
\f3+\f2n\f1[\f2u\f1]
Skips reading
.I n
bytes of data before dumping.
If specified, the unit
.I u
may be one of
.B b
(512-byte blocks),
.B k
(kilobytes),
or
.B m
(megabytes),
and
.I n
is interpreted accordingly.
.TP
.BI \-b " n"
Sets the search number size to
.I n
bits
(and therefore the number of bytes is set to
.I n
divided by 8).
Must be one of 8, 16, 32, or 64
(on systems that have 64-bit long integers).
The default is automatically calculated
based on the argument to either the
.B \-e
or
.B \-E
option.
.TP
.BI \-B " n"
Same as the
.B \-b
option
but in
.I n
bytes.
Must be one of 1, 2, 4, or 8
(on systems that have 64-bit long integers).
.TP
.BI \-c " w"
Sets when to colorize output to
.I w
(which is case-insensitive).
(See the
.B AD_COLORS
environment variable about colorization.)
The choices for
.I w
are:
.RS
.TP 11
.B always
Always colorize.
.TP
.B auto
Same as
.B isatty
(for compatibility with
.BR grep ).
.TP
.B isatty
Colorize only when standard output is connected to a TTY
(terminal)
and the TERM environment variable
is not empty and not equal to
.BR dumb .
(This is equivalent to
.BR grep 's
.B --color=auto
option,
but explicit about what ``auto'' means.)
.TP
.B never
Never colorize.
Note that this renderes the
.BR \-e ,
.BR \-E ,
.BR \-s ,
and
.B \-S
options useless since matches won't be highlighted.
.TP
.B not_file
Colorize only when
.I not
writing to a regular file
(hence writing to a TTY or pipe)
and the TERM environment variable
is not empty and not equal to
.BR dumb .
(Specifically,
.BR fstat (3)
is called on standard output:
colorize only if \f(CWS_IFREG\fP is false.)
.TP
.B ""
This is more useful than
.B isatty
since it accomodates the common case of allowing color output to be piped to
.BR less (1)
and still display in color since
.B less
understands
.I SGR
(``Select Graphic Rendition'')
ASCII terminal escape sequences
that produce color.
.TP
.B not_isreg
An explicit synonym for
.BR not_file .
.TP
.B tty
A shorthand synonym for
.BR isatty .
.RE
.TP
.B ""
The default is
.BR not_file .
.TP
.B \-d
Prints offsets in decimal.
.TP
.BI \-e " n"
Hightlights all occurrences of the number
.I n
in little-endian byte order.
.TP
.B ""
The number of bytes to search for is automatically calculated
as the minimum number of bytes needed to represent
.IR n .
For example,
if
.I n
were in the range 0\-255,
the number of bytes would be 1;
if
.I n
were in the range 256\-65535,
the number of bytes would be 2;
and so on.
.TP
.BI \-E " n"
Same as the
.B \-e
option
but in big-endian byte order.
.TP
.B \-h
Prints offsets in hexadecimal
(the default).
.TP
.B \-i
Performs a case-insensitive search
of the string specified by the
.B \-s
option.
.TP
\f3\-j\f1 \f2n\f1[\f2u\f1]
Same as the
.B +
option.
(If both options are specified,
their values are added.)
.TP
.B \-m
Only dumps lines that contain matches.
.TP
.BI \-N " n"
Dumps at most
.I n
bytes.
.TP
.B \-o
Prints offsets in octal.
.TP
.BI \-s " s"
Searches for the string
.I s
and highlights matches.
.TP
.BI \-S " s"
Searches for the string
.I s
in a case-insensitive manner
and highlights matches.
(This option is the same as specifying both the
.B \-s
and
.B \-i
options.)
.TP
.B \-v
Prints the version number to
.I stderr
and exit.
.SH EXIT STATUS
.PD 0
.IP 0
Success.
.IP 1
Error in command-line.
.IP 3
Out of memory.
.IP 10
Error opening file for reading.
.IP 11
Read error.
.IP 13
Write error.
.IP 20
Seek error.
.IP 21
.B stat
error.
.PD
.SH ENVIRONMENT
.TP 4
.B AD_COLORS
This variable specifies the colors and other attributes
used to highlight various parts of the output
in a manner similar to the
.B GREP_COLORS
variable
used by
.BR grep .
.TP
.B ""
As with
.BR grep ,
the value is comprised of a colon-separated sequence of capabilities.
Each capability is of the form
.IR name [= SGR ]
where
.I name
is a two-character capability name
and
.IR SGR ,
if present,
is a
``Select Graphic Rendition''
value
that is a semicolon-separated list of integers
in the range 0\-255.
An example SGR value is \f(CW31;1\fP
that specifies a bright red foreground
on the terminal's default background.
.TP
.B ""
Capability names in upper-case are unique to
.BR ad ;
those in lower-case are upwards compatibile with
.BR grep .
.RS
.TP 8
.BI MA= SGR
SGR for matched ASCII characters.
Default is \f(CW41;1\fP
(current terminal foreground over a bright red background).
.TP
.BI MH= SGR
SGR for matched hexadecimal.
Default is \f(CW41;1\fP
(current terminal foreground over a bright red background).
.TP
.BI MB= SGR
SGR for both matched ASCII and hexadecimal.
(This capability is the same as specifying both the
.B MA
and
.B MH
capabilities
with the same
.IR SGR ).
.TP
.BI mt= SGR
Same as
.B MB
(for compatibility with
.BR grep ).
.TP
.BI bn= SGR
SGR for the byte offset
(as with
.BR grep ).
Default is \f(CW36\fP
(green foreground over current terminal background).
.TP
.BI se= SGR
SGR for the ``\f(CW:\fP'' and ``\f(CW-\fP'' separators
(as with
.BR grep ).
Default is \f(CW36\fP
(cyan foreground over current terminal background).
.TP
.B ne
Boolean value that,
when true,
prevents clearing to the end of a line using the Erase in Line
(EL)
SGR escape sequence
(as with
.BR grep ).
.TP
.B ""
This is needed on terminals on which EL is not supported.
It is otherwise useful on terminals for which the
.B back_color_erase
(BCE)
Boolean terminfo capability does not apply,
when the chosen highlight colors do not affect the background,
or when EL is too slow or causes too much flicker.
The default is false
(i.e., EL is used for clearing to the end of a line).
.RE
.TP
.B ""
Other
.B grep
capabilities, if present, are ignored
because they don't apply in
.BR ad .
The term ``color'' is used loosely.
In addition to colors,
other character attributes
such as bold, underlined, reverse video, etc.,
may be possible depending on the capabilities of your terminal.
.TP
.B GREP_COLOR
This variable is used for compatibility with older versions of
.BR grep .
It specifies the colors and other attributes
used to highlight matched bytes.
As with
.BR grep ,
it is deprecated in favor of
.BR GREP_COLORS .
It can only specify the colors used to highlight
both the matching bytes ASCII and hexadecimal bytes
(same as the
.B MB
capability).
This variable is used only when it contains a valid SGR value
and both
.B AD_COLORS
and
.B GREP_COLORS
are either unset or empty.
.TP
.B GREP_COLORS
This variable is used for compatibility with newer versions of
.BR grep .
It is used exactly as
.B AD_COLORS
but only when
.B AD_COLORS
is either unset or empty.
Capabilities in
.B grep
that are unsupported by
.B ad
(because they don't apply)
are ignored.
.TP
.B TERM
The type of the terminal on which
.B ad
is being run.
.SH AUTHOR
Paul J. Lucas
.RI < paul@lucasmail.org >
.SH SEE ALSO
.BR grep (1),
.BR hexdump (1),
.BR od (1),
.BR less (1),
.BR fstat (2),
.BR isatty (3),
.BR isprint (3)
.PP
.nf
.I "ANSI escape code,"
<https://en.wikipedia.org/wiki/ANSI_escape_code>
